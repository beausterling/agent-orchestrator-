# Agent Zero Orchestrator - Claude Code Configuration

## Project Overview

**Agent Zero** is an open-source, multi-agent AI orchestration framework designed to function as a personal AI assistant that grows and learns with use. This codebase serves as the foundation for building a **personal orchestration agent** capable of:

- Creating and managing infinite hierarchical sub-agents
- Developing custom skills and automation workflows
- Executing code across multiple runtimes (local, SSH, Docker)
- Persistent learning through vector-based memory
- Web browsing and research automation
- Eventually generating income through automated task execution

## Architecture at a Glance

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           USER INTERFACE                                │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐       │
│  │   Web UI    │ │  CLI/API    │ │  External   │ │    MCP      │       │
│  │ (Alpine.js) │ │  Endpoints  │ │  A2A Chat   │ │  Protocol   │       │
│  └──────┬──────┘ └──────┬──────┘ └──────┬──────┘ └──────┬──────┘       │
└─────────┼───────────────┼───────────────┼───────────────┼───────────────┘
          │               │               │               │
          └───────────────┴───────────────┴───────────────┘
                                  │
┌─────────────────────────────────▼───────────────────────────────────────┐
│                         AGENT 0 (MAIN AGENT)                            │
│  ┌────────────────┐ ┌────────────────┐ ┌────────────────┐              │
│  │ Monologue Loop │ │ Tool Executor  │ │ Memory Manager │              │
│  └────────────────┘ └────────────────┘ └────────────────┘              │
│                              │                                          │
│  ┌───────────────────────────▼───────────────────────────┐             │
│  │                    TOOL SYSTEM (22 Tools)              │             │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │             │
│  │  │code_execution│ │call_subordin.│ │browser_agent │   │             │
│  │  │memory_save   │ │memory_load   │ │search_engine │   │             │
│  │  │knowledge_tool│ │document_query│ │scheduler     │   │             │
│  │  │vision_load   │ │a2a_chat      │ │behaviour_adj │   │             │
│  │  └──────────────┘ └──────────────┘ └──────────────┘   │             │
│  └───────────────────────────────────────────────────────┘             │
└─────────────────────────────────────────────────────────────────────────┘
                                  │
                    ┌─────────────┼─────────────┐
                    │             │             │
          ┌─────────▼───┐ ┌───────▼─────┐ ┌────▼────────┐
          │ Subordinate │ │ Subordinate │ │ Subordinate │
          │  Agent 1    │ │  Agent 2    │ │  Agent N    │
          │ (Developer) │ │ (Researcher)│ │  (Custom)   │
          └─────────────┘ └─────────────┘ └─────────────┘
                    │             │             │
                    └─────────────┼─────────────┘
                                  │
┌─────────────────────────────────▼───────────────────────────────────────┐
│                        EXECUTION ENVIRONMENTS                            │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
│  │ Local Shell  │ │  SSH Remote  │ │   Docker     │ │   Browser    │   │
│  │   (Python,   │ │  Execution   │ │  Sandboxed   │ │ (Playwright) │   │
│  │  Node, Bash) │ │              │ │              │ │              │   │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
                                  │
┌─────────────────────────────────▼───────────────────────────────────────┐
│                         PERSISTENCE LAYER                                │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
│  │ FAISS Vector │ │  Knowledge   │ │ Chat History │ │  Backups &   │   │
│  │   Memory     │ │    Base      │ │    Logs      │ │   Projects   │   │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Directory Structure

```
/home/user/agent-orchestrator-/
├── agent.py                  # Core agent implementation (35.8KB)
├── models.py                 # LLM provider abstraction (32.7KB)
├── initialize.py             # Framework initialization
├── run_ui.py                 # Web UI Flask server
├── requirements.txt          # Python dependencies
│
├── python/                   # Backend Python code
│   ├── api/                  # 57 REST API endpoints
│   ├── tools/                # 22 tool implementations
│   ├── extensions/           # 22 extension points (lifecycle hooks)
│   └── helpers/              # 40+ utility modules
│
├── agents/                   # Agent profiles and configurations
│   ├── default/              # Default agent settings
│   ├── developer/            # Developer role agent
│   ├── researcher/           # Researcher role agent
│   ├── hacker/               # Security research agent
│   └── _example/             # Template for custom agents
│
├── prompts/                  # 40+ system prompt templates
├── knowledge/                # Knowledge base storage
│   ├── default/              # System knowledge
│   └── custom/               # User-provided knowledge
│
├── instruments/              # Custom tools/scripts
├── memory/                   # Persistent vector memory (runtime)
├── logs/                     # Chat logs (runtime)
│
├── webui/                    # Web interface
│   ├── index.html            # SPA entry point
│   ├── js/                   # JavaScript modules
│   └── components/           # UI components
│
├── conf/                     # Configuration
│   └── model_providers.yaml  # LLM provider definitions
│
├── docker/                   # Docker configuration
└── docs/                     # Documentation
```

---

## Core Components

### 1. Agent System (`agent.py`)

The heart of the framework. Key classes:

- **`AgentContext`**: Manages execution environment, chat history, agent hierarchy
- **`Agent`**: Core agent with monologue loop, tool execution, memory management
- **`AgentConfig`**: Configuration for LLM models, execution settings, profiles

### 2. Tool System (`python/tools/`)

Tools are auto-discovered capabilities agents can use:

| Tool | Purpose | Income Potential |
|------|---------|------------------|
| `code_execution_tool` | Execute Python/Node/Shell | Automate development tasks |
| `call_subordinate` | Create and delegate to sub-agents | Scale operations infinitely |
| `browser_agent` | Automate web interactions | Web scraping, data gathering |
| `memory_save/load` | Persistent learning | Improve over time |
| `knowledge_tool` | Query knowledge base | Domain expertise |
| `search_engine` | Web search via SearXNG | Research automation |
| `scheduler` | Schedule future tasks | Autonomous operation |
| `document_query` | Q&A on documents | Document processing |
| `a2a_chat` | Agent-to-agent communication | Distributed computing |

### 3. Extension System (`python/extensions/`)

22 lifecycle hooks for customization:

- `agent_init` - Agent initialization
- `before_main_llm_call` - Pre-LLM processing
- `message_loop_*` - Message loop lifecycle
- `tool_execute_before/after` - Tool execution hooks
- `system_prompt` - Dynamic prompt modification
- `reasoning_stream` / `response_stream` - Output streaming

### 4. Memory System

- **Vector Memory**: FAISS-based semantic search
- **Knowledge Base**: Indexed documents and solutions
- **Auto-consolidation**: AI-powered memory management
- **Persistent Storage**: Survives restarts

---

## LLM Provider Support

Configured in `conf/model_providers.yaml`. Supports 20+ providers:

| Provider | Type | Notes |
|----------|------|-------|
| Anthropic | Chat/Embedding | Claude models |
| OpenAI | Chat/Embedding | GPT-4, o1, embeddings |
| Google | Chat | Gemini models |
| Groq | Chat | Fast inference |
| Ollama | Chat/Embedding | Local models |
| OpenRouter | Chat | Multi-provider access |
| DeepSeek | Chat | Cost-effective |
| LM Studio | Chat/Embedding | Local deployment |
| Azure | Chat/Embedding | Enterprise |
| xAI | Chat | Grok models |

---

## Key Workflows

### Creating a Sub-Agent

Agents can create subordinates for task delegation:

```python
# In agent context, call_subordinate tool is used:
{
    "tool": "call_subordinate",
    "args": {
        "message": "Research the latest Python async patterns",
        "reset": false  # Keep context for follow-up tasks
    }
}
```

### Adding Custom Tools

1. Create file in `python/tools/my_tool.py` or `agents/<profile>/tools/`
2. Inherit from `Tool` base class
3. Implement `execute()` method
4. Tool is auto-discovered on restart

```python
from python.helpers.tool import Tool

class MyCustomTool(Tool):
    name = "my_tool"
    description = "Description for the LLM"

    async def execute(self, **kwargs):
        # Tool implementation
        return "Result"
```

### Adding Extensions

1. Create file in `python/extensions/<hook_name>/my_extension.py`
2. Inherit from `Extension` base class
3. Implement `execute()` method

```python
from python.helpers.extension import Extension

class MyExtension(Extension):
    async def execute(self, **kwargs):
        # Modify behavior at this lifecycle point
        pass
```

### Creating Agent Profiles

1. Create directory: `agents/my_profile/`
2. Add `_context.md` for profile-specific context
3. Optionally add `prompts/`, `tools/`, `extensions/` subdirectories
4. Select profile via settings

---

## API Endpoints (57 Total)

### Core Messaging
- `POST /api_message` - Send message, get streamed response
- `POST /poll` - Long-poll for updates
- `POST /chat_create` - Start new chat
- `POST /chat_reset` - Clear chat

### Memory & Knowledge
- `GET /memory_dashboard` - View memories
- `POST /knowledge_reindex` - Rebuild index
- `POST /import_knowledge` - Add documents

### Scheduling
- `POST /scheduler_task_create` - Schedule task
- `GET /scheduler_tasks_list` - List scheduled tasks

### External Integration
- `POST /api_message` - External API access
- MCP Protocol support for tool exposure

---

## Development Guidelines

### Code Style
- Python 3.10+ with async/await patterns
- Type hints encouraged
- Docstrings for public methods

### Testing
- Run tests from `/tests/` directory
- Manual testing via Web UI

### Adding Features
1. Identify appropriate component (tool, extension, API)
2. Follow existing patterns in codebase
3. Test in isolated agent profile first
4. Document in relevant prompt files

### Security Considerations
- Code execution is sandboxed (Docker recommended)
- Secrets stored encrypted in settings
- Rate limiting on API endpoints
- CSRF protection on web UI

---

## Environment Setup

### Required Environment Variables

```bash
# LLM Provider Keys (set ones you'll use)
ANTHROPIC_API_KEY=your_key
OPENAI_API_KEY=your_key
GOOGLE_API_KEY=your_key

# Optional: For Docker execution
DOCKER_HOST=tcp://localhost:2375

# Optional: For SSH execution
SSH_HOST=your_host
SSH_PORT=22
SSH_USER=your_user
SSH_KEY_PATH=/path/to/key
```

### Running Locally

```bash
# Install dependencies
pip install -r requirements.txt

# Start web UI
python run_ui.py

# Access at http://localhost:50001
```

### Running with Docker

```bash
docker pull agent0ai/agent-zero
docker run -p 50001:80 -v ./memory:/app/memory agent0ai/agent-zero
```

---

## Income Generation Strategies

This framework supports several automation strategies:

### 1. Code Generation Services
- Custom development automation
- Code review and refactoring
- Documentation generation

### 2. Research & Data Services
- Market research automation
- Data gathering and analysis
- Report generation

### 3. Content Creation
- Technical writing
- Documentation
- Tutorial creation

### 4. Automation Services
- Workflow automation
- Task scheduling
- System monitoring

### 5. Consulting Augmentation
- Client deliverable automation
- Technical analysis
- Solution prototyping

---

## Key Files for Customization

| File | Purpose | Modify For |
|------|---------|------------|
| `prompts/agent.system.main.md` | Main system prompt | Core behavior changes |
| `agents/<profile>/_context.md` | Profile context | Role-specific behavior |
| `conf/model_providers.yaml` | LLM configuration | Adding/modifying providers |
| `python/tools/*.py` | Tool implementations | New capabilities |
| `python/extensions/*/*.py` | Lifecycle hooks | Behavior modification |
| `knowledge/custom/main/` | Knowledge base | Domain expertise |

---

## Troubleshooting

### Common Issues

1. **LLM Connection Failed**: Check API keys in `.env` or settings
2. **Memory Errors**: Ensure FAISS is installed correctly
3. **Docker Execution Failed**: Verify Docker daemon is running
4. **Browser Automation Failed**: Install Playwright browsers: `playwright install`

### Debug Mode

Enable verbose logging in settings or set environment:
```bash
export DEBUG=1
python run_ui.py
```

---

## Future Development Roadmap

### Phase 1: Foundation (Current)
- [x] Multi-agent hierarchy
- [x] Tool system
- [x] Memory persistence
- [x] Web UI

### Phase 2: Skill Development
- [ ] Custom skill marketplace
- [ ] Skill sharing between agents
- [ ] Skill versioning and rollback

### Phase 3: Automation Workflows
- [ ] Visual workflow builder
- [ ] Trigger-based automation
- [ ] External webhook support

### Phase 4: Income Generation
- [ ] Task marketplace integration
- [ ] Billing and invoicing automation
- [ ] Client portal

---

## Quick Reference Commands

```bash
# Start the system
python run_ui.py

# Create backup
# (Use Web UI: Settings > Backup)

# Add knowledge document
# Copy to: knowledge/custom/main/

# View logs
# Check: logs/ directory

# Restart agent
# Web UI: Click restart button or send /restart
```

---

## Contributing

1. Fork the repository
2. Create feature branch
3. Follow existing code patterns
4. Test thoroughly
5. Submit pull request

See `docs/contribution.md` for detailed guidelines.

---

## Resources

- **Documentation**: `docs/` directory
- **Architecture**: `docs/architecture.md`
- **Extensibility**: `docs/extensibility.md`
- **MCP Setup**: `docs/mcp_setup.md`
- **Troubleshooting**: `docs/troubleshooting.md`
